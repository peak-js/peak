<template>
  <html>
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title x-text="title || 'Peak SSR App'"></title>
      <style>
        body {
          margin: 0;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          background-color: #f5f5f5;
        }
        .layout-header {
          background: #2c3e50;
          color: white;
          padding: 1rem 0;
          margin-bottom: 2rem;
        }
        .layout-container {
          max-width: 1200px;
          margin: 0 auto;
          padding: 0 1rem;
        }
        .layout-footer {
          margin-top: 3rem;
          padding: 2rem 0;
          text-align: center;
          color: #666;
          border-top: 1px solid #ddd;
          background: white;
        }
      </style>
      <slot name="head"></slot>
    </head>
    <body>
      <header class="layout-header">
        <div class="layout-container">
          <h1 x-text="siteName || 'Peak SSR'"></h1>
          <p x-if="subtitle" x-text="subtitle"></p>
        </div>
      </header>
      
      <main class="layout-container">
        <slot></slot>
      </main>
      
      <footer class="layout-footer">
        <div class="layout-container">
          <p x-text="`Rendered on server at ${renderTime}`" x-if="renderTime"></p>
          <p>Powered by Peak.js SSR</p>
        </div>
      </footer>
      <slot name="foot"></slot>
    </body>
  </html>
</template>

<script>
export default class {
  constructor() {
    this.siteName = 'Peak SSR'
    this.title = 'Peak SSR App'
    this.subtitle = null
    this.renderTime = null
  }
  
  async ssr() {
    this.renderTime = new Date().toISOString()
    console.log(`[Layout SSR] Rendering layout with title: ${this.title}`)
  }
  
  initialize() {
    console.log(`[Layout Init] Layout initialized in ${this.$ssr ? 'SSR' : 'client'} context`)
  }
}
</script>
